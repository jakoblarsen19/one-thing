<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One Thing | 8-Day Challenge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&family=Playfair+Display:italic,wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff;
            color: #000000;
            overflow: hidden;
        }
        .serif { font-family: 'Playfair Display', serif; }
        
        /* Progress Circle Styles */
        .progress-ring__circle {
            transition: stroke-dashoffset 0.35s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }

        /* Animations */
        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        .animate-pop { animation: pop 0.3s ease-out; }

        @keyframes slideUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .slide-up { animation: slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1); }

        .streak-flame {
            filter: grayscale(100%);
            transition: all 0.5s ease;
        }
        .streak-active {
            filter: grayscale(0%);
            color: #ef4444;
            transform: scale(1.1);
        }

        /* Badge Glow */
        .badge-glow {
            box-shadow: 0 0 20px rgba(22, 163, 74, 0.2);
            border: 2px solid #16a34a;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">

    <!-- App Container -->
    <div id="app" class="w-full max-w-md h-[90vh] flex flex-col p-8 relative">
        
        <!-- Header: Streak & Progress -->
        <div class="flex justify-between items-center mb-12">
            <div class="flex items-center gap-2">
                <span id="streak-icon" class="streak-flame text-2xl">üî•</span>
                <span id="streak-count" class="text-xl font-bold">0</span>
            </div>
            <div class="text-right">
                <p class="text-[10px] font-bold tracking-widest text-gray-400 uppercase">Current Goal</p>
                <p class="text-sm font-medium">7 Day Finisher Badge</p>
            </div>
        </div>

        <!-- Main Content Area -->
        <div id="content-screen" class="flex-grow flex flex-col justify-center">
            <!-- Dynamic Content Injected Here -->
        </div>

        <!-- Progress Tracker Footer -->
        <div class="mt-auto pt-8">
            <div class="flex justify-between mb-4">
                <p id="day-label" class="text-[10px] font-bold tracking-widest text-gray-400 uppercase">Day 1 of 8</p>
                <p id="percent-label" class="text-[10px] font-bold tracking-widest text-gray-400 uppercase">0%</p>
            </div>
            <div class="flex gap-2">
                <!-- 8 Progress Dots -->
                <div id="dots-container" class="flex w-full justify-between gap-1">
                    <!-- Dots injected by JS -->
                </div>
            </div>
        </div>

        <!-- Reward Modal (Hidden by default) -->
        <div id="reward-modal" class="fixed inset-0 bg-white z-50 flex flex-col items-center justify-center p-10 hidden">
            <div class="w-32 h-32 rounded-full bg-green-50 flex items-center justify-center mb-8 badge-glow animate-bounce">
                <span class="text-5xl">üèÜ</span>
            </div>
            <h2 class="text-3xl font-bold mb-2">The Finisher</h2>
            <p class="text-gray-500 text-center mb-12">You maintained the "One Thing" for 7 straight days. Your identity has shifted.</p>
            <button onclick="closeModal()" class="w-full py-4 bg-black text-white rounded-2xl font-bold tracking-wide">CONTINUE TO DAY 8</button>
        </div>
    </div>

    <script>
        // State Management
        let currentDay = 1;
        let streak = 0;
        const totalDays = 8;
        const habit = "10 Squats";
        let completedDays = [];

        const contentScreen = document.getElementById('content-screen');
        const dotsContainer = document.getElementById('dots-container');
        const streakCount = document.getElementById('streak-count');
        const streakIcon = document.getElementById('streak-icon');
        const dayLabel = document.getElementById('day-label');
        const percentLabel = document.getElementById('percent-label');
        const rewardModal = document.getElementById('reward-modal');

        // Initialize App
        function init() {
            renderDots();
            showTaskScreen();
        }

        function renderDots() {
            dotsContainer.innerHTML = '';
            for (let i = 1; i <= totalDays; i++) {
                const dot = document.createElement('div');
                dot.className = `h-1.5 flex-grow rounded-full transition-all duration-500 ${completedDays.includes(i) ? 'bg-green-600' : 'bg-gray-100'}`;
                dotsContainer.appendChild(dot);
            }
        }

        function showTaskScreen() {
            contentScreen.innerHTML = `
                <div class="slide-up">
                    <p class="text-gray-400 mb-2 uppercase tracking-tighter text-sm font-bold">Identity: The Finisher</p>
                    <h1 class="serif text-5xl mb-8 italic">"${habit}"</h1>
                    <p class="text-lg text-gray-500 mb-12">Action is the only thing that matters today. Do it now.</p>
                    <button onclick="completeHabit()" class="w-full py-6 bg-black text-white rounded-2xl font-black text-xl hover:bg-gray-900 transition-transform active:scale-95">
                        I DID IT
                    </button>
                </div>
            `;
            updateUI();
        }

        function completeHabit() {
            if (!completedDays.includes(currentDay)) {
                completedDays.push(currentDay);
                streak++;
                
                // Visual Feedback
                streakIcon.classList.add('streak-active');
                
                if (currentDay === 7) {
                    showReward();
                } else {
                    nextDay();
                }
            }
        }

        function showReward() {
            rewardModal.classList.remove('hidden');
            rewardModal.classList.add('flex');
        }

        function closeModal() {
            rewardModal.classList.add('hidden');
            rewardModal.classList.remove('flex');
            nextDay();
        }

        function nextDay() {
            if (currentDay < totalDays) {
                currentDay++;
                renderDots();
                showTaskScreen();
                
                // Gamification: Pop effect on streak
                streakCount.classList.add('animate-pop');
                setTimeout(() => streakCount.classList.remove('animate-pop'), 300);
            } else {
                showFinalScreen();
            }
        }

        function showFinalScreen() {
            contentScreen.innerHTML = `
                <div class="slide-up text-center">
                    <span class="text-6xl mb-6 block">‚ú®</span>
                    <h1 class="text-3xl font-bold mb-4">Level Up</h1>
                    <p class="text-gray-500 mb-8">8 days complete. You are no longer someone who tries. You are someone who finishes.</p>
                    <button onclick="location.reload()" class="text-sm font-bold border-b-2 border-black pb-1">RESET CHALLENGE</button>
                </div>
            `;
            updateUI();
        }

        function updateUI() {
            streakCount.innerText = streak;
            dayLabel.innerText = `Day ${currentDay} of ${totalDays}`;
            const percent = Math.round(((currentDay - 1) / totalDays) * 100);
            percentLabel.innerText = `${percent}%`;
        }

        init();
    </script>
</body>
</html>
